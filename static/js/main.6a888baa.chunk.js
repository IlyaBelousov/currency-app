(this["webpackJsonpcurrency-app"]=this["webpackJsonpcurrency-app"]||[]).push([[0],{108:function(e,t,r){},133:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(30),s=r.n(c),i=(r(108),r(69)),o=r.n(i),u=r(204),j=r(205),l=r(206),d=r(207),b=r(208),h=r(209),p=r(55),O=r(14),x=r(13),f=r(64),v=r.n(f),g=r(190),C=r(18),E=r(19),m=r(58),y=r.n(m),R=y.a.create({method:"GET",baseURL:"https://currency-exchange.p.rapidapi.com/exchange",headers:{"x-rapidapi-host":"currency-exchange.p.rapidapi.com","x-rapidapi-key":"e817d06739mshe406e098177e879p147060jsn4742de4ee977"}}),S=function(e,t,r){return R.get("",{params:{from:e,to:t,q:r}})},T={error:"",isLoading:!1},A=function(e){return{type:"APP/SET-ERROR",error:e}},N=function(e){return{type:"APP/SET-IS-LOADING",isLoading:e}},U={convertValues:{from:"",to:""},result:0},L=r(2),I=function(){var e=Object(C.c)((function(e){return e.conversion.result})),t=Object(C.c)((function(e){return e.conversion.convertValues.to})),r=Object(C.b)(),n=navigator.language||navigator.userAgent;console.log(n);var c=/^[0-9]{1,9}\s[A-Z]{3}\s[A-Z]{2}\s[A-Z]{3}$/i,s=/^[0-9]{1,9}/,i=/[A-Z]{3}/,o=/\s[A-Z]{2}\s/,u=/[A-Z]{3}$/,j=Object(a.useState)(""),l=Object(x.a)(j,2),d=l[0],b=l[1],h=Object(a.useState)(""),p=Object(x.a)(h,2),O=p[0],f=p[1];return Object(L.jsx)("div",{className:v.a.currWrapper,children:Object(L.jsxs)("div",{className:v.a.currCard,children:[Object(L.jsx)(g.a,{onKeyPress:function(e){if("Enter"===e.key)if(c.test(d)){var t=d.slice(d.search(s),d.search(i)-d.search(s)),a=d.slice(d.search(i),d.search(o)),n=d.slice(d.search(u),d.length);r(function(e,t,r){return function(a){a(N(!0)),S(e,t,r).then((function(n){a(N(!1));var c=n.data;a(function(e){return{type:"CONVERSION/SET-RESULT",result:e}}(Math.ceil(+r*c))),a({type:"CONVERSION/CONVERT-CURRENCY",payload:{from:e,to:t,amount:r}})})).catch((function(e){a(N(!1)),a(A(e.message))}))}}(a,n,t.trim())),f("success")}else f("error")},fullWidth:!0,error:"error"===O,label:"Enter values",onChange:function(e){c.test(e.currentTarget.value)?(b(e.currentTarget.value.toUpperCase()),f("")):b(e.currentTarget.value.toUpperCase())},variant:"standard",placeholder:"Example: 15 usd in rub",helperText:"error"===O?"Incorrect value":"",value:d}),Object(L.jsxs)("div",{className:v.a.resultContainer,children:[Object(L.jsx)("span",{children:e&&e}),Object(L.jsx)("span",{children:t})]})]})})},_=r(197),W=r(199),k=r(203),w=r(202),V=r(198),B=r(200),P=r(201),Z=r(191),D=r(192),G=r(185),F=r(188),H=y.a.create({method:"GET",baseURL:"https://exchangerate-api.p.rapidapi.com/rapid/latest/",headers:{"x-rapidapi-host":"exchangerate-api.p.rapidapi.com","x-rapidapi-key":"e817d06739mshe406e098177e879p147060jsn4742de4ee977"}}),Y=function(e){return H.get("".concat(e))},J={baseCode:"ru-RU"===navigator.language?"RUB":"USD",rates:{}},M=function(e){return function(t){t(N(!0)),Y(e).then((function(r){t(N(!1));var a=r.data.rates;delete a[e],t(function(e){return{type:"RATES/SET-RATES",rates:e}}(a)),t({type:"RATES/CHANGE-BASE-CURRENCY",baseCurrency:e})})).catch((function(e){t(N(!1)),t(A(e.message))}))}},$=function(){var e=Object(C.c)((function(e){return e.rates.baseCode})),t=Object(C.b)();return Object(L.jsxs)(Z.a,{variant:"standard",sx:{m:1,minWidth:120},children:[Object(L.jsx)(D.a,{children:"Base currency"}),Object(L.jsxs)(G.a,{value:e,onChange:function(e){t(M(e.target.value))},label:"Base currency",children:[Object(L.jsx)(F.a,{value:"USD",children:"USD"}),Object(L.jsx)(F.a,{value:"EUR",children:"EUR"}),Object(L.jsx)(F.a,{value:"RUB",children:"RUB"})]})]})},q=function(){var e=Object(C.c)((function(e){return e.rates.baseCode})),t=Object(C.c)((function(e){return e.rates.rates})),r=Object(C.b)();Object(a.useEffect)((function(){r(M(e))}),[]);var n=[{id:"name",label:e,minWidth:70},{id:"code",label:"Rate",minWidth:20}];return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)($,{}),Object(L.jsx)(_.a,{sx:{width:"40%",overflow:"hidden"},children:Object(L.jsx)(V.a,{sx:{maxHeight:440},children:Object(L.jsxs)(W.a,{stickyHeader:!0,"aria-label":"sticky table",children:[Object(L.jsx)(B.a,{children:Object(L.jsx)(P.a,{children:n.map((function(e){return Object(L.jsx)(w.a,{align:e.align,style:{minWidth:e.minWidth,fontSize:"16px"},children:e.label},e.id)}))})}),Object(L.jsx)(k.a,{children:Object.keys(t).map((function(r){return Object(L.jsxs)(P.a,{hover:!0,role:"checkbox",tabIndex:-1,children:[Object(L.jsxs)(w.a,{align:n[0].align,children:["1 ",e]},n[0].id),Object(L.jsxs)(w.a,{children:[t[r]," ",r]},n[1].id)]},r)}))})]})})})]})},z=r(184),K=r(189),Q=r(187),X=n.a.forwardRef((function(e,t){return Object(L.jsx)(Q.a,Object(E.a)({elevation:6,ref:t,variant:"filled"},e))}));function ee(){var e=Object(C.c)((function(e){return e.app.error})),t=Object(C.b)(),r=function(e,r){"clickaway"!==r&&t(A(""))};return Object(L.jsx)(z.a,{spacing:2,sx:{width:"100%"},children:Object(L.jsx)(K.a,{open:!!e,autoHideDuration:4e3,onClose:r,children:Object(L.jsx)(X,{onClose:r,severity:"error",sx:{width:"100%"},children:e})})})}function te(){var e=Object(C.c)((function(e){return e.app.isLoading}));return Object(L.jsxs)("div",{className:o.a.appWrapper,children:[Object(L.jsx)(u.a,{position:"static",children:Object(L.jsxs)(j.a,{style:{justifyContent:"space-evenly",alignItems:"center"},children:[Object(L.jsx)(l.a,{variant:"h6",children:"Simple currency exchange"}),Object(L.jsx)(p.b,{to:"/",children:Object(L.jsx)(d.a,{variant:"text",color:"inherit",children:"Currency exchange"})}),Object(L.jsx)(p.b,{to:"/rates",children:Object(L.jsx)(d.a,{variant:"text",color:"inherit",children:"Latest Rates"})})]})}),e&&Object(L.jsx)(b.a,{sx:{width:"100%"},children:Object(L.jsx)(h.a,{})}),Object(L.jsxs)(O.c,{children:[Object(L.jsx)(O.a,{path:"/currency-app",element:Object(L.jsx)(I,{})}),Object(L.jsx)(O.a,{path:"/rates",element:Object(L.jsx)(q,{})})]}),Object(L.jsx)(ee,{})]})}var re=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,210)).then((function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),a(e),n(e),c(e),s(e)}))},ae=r(66),ne=r(93),ce=Object(ae.b)({conversion:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONVERSION/CONVERT-CURRENCY":return Object(E.a)(Object(E.a)({},e),{},{convertValues:Object(E.a)({},t.payload)});case"CONVERSION/SET-RESULT":return Object(E.a)(Object(E.a)({},e),{},{result:t.result});default:return e}},rates:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RATES/CHANGE-BASE-CURRENCY":return Object(E.a)(Object(E.a)({},e),{},{baseCode:t.baseCurrency});case"RATES/SET-RATES":return Object(E.a)(Object(E.a)({},e),{},{rates:Object(E.a)({},t.rates)});default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;return"APP/SET-IS-LOADING"===t.type?Object(E.a)(Object(E.a)({},e),{},{isLoading:t.isLoading}):e}}),se=Object(ae.c)(ce,Object(ae.a)(ne.a));s.a.render(Object(L.jsx)(n.a.StrictMode,{children:Object(L.jsx)(p.a,{basename:"/currency-app",children:Object(L.jsx)(C.a,{store:se,children:Object(L.jsx)(te,{})})})}),document.getElementById("root")),re()},64:function(e,t,r){e.exports={currCard:"ExchangeCard_currCard__1LmxV",resultContainer:"ExchangeCard_resultContainer__2_hCS"}},69:function(e,t,r){e.exports={appWrapper:"App_appWrapper__3N15s",currWrapper:"App_currWrapper__ZkNxZ"}}},[[133,1,2]]]);
//# sourceMappingURL=main.6a888baa.chunk.js.map